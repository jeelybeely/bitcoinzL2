{"generator":"Code Snippets v3.6.9","date_created":"2025-03-06 22:55","snippets":[{"id":9,"name":"Ai Generator Frontend","code":"add_shortcode('ai_generator', function() {\n    ob_start();\n    ?>\n    <div class=\"ai-generator\">\n        <textarea id=\"ai-prompt\" placeholder=\"Describe your sticker here...\"><\/textarea>\n        <button id=\"generate-btn\">Generate Design<\/button>\n        <div id=\"loading\" style=\"display:none;\">\n            <div class=\"spinner\"><\/div>\n            <p>Generating your design...<\/p>\n        <\/div>\n        <img id=\"design-preview\" style=\"display:none;\">\n\t\t<!-- Add these lines after <img id=\"design-preview\"> -->\n<div class=\"action-buttons\" style=\"margin-top: 20px; display: none;\" id=\"action-buttons\">\n    <button id=\"redo-btn\" style=\"background: #4a5568; color: white; padding: 12px 24px; margin-right: 10px;\">Redo<\/button>\n    <button id=\"add-to-cart-btn\" style=\"background: #48bb78; color: white; padding: 12px 24px;\">Add to Cart<\/button>\n<\/div>\n\t\t<!-- ADD OPTIONS SELECTORS -->\n<div class=\"sticker-options\">\n    <div class=\"option\">\n        <select name=\"size\" class=\"sticker-select\">\n            <option value='3\"x3\"'>3\"x3\"<\/option>\n            <option value='4\"x4\"'>4\"x4\"<\/option>\n            <option value='5\"x5\"'>5\"x5\"<\/option>\n        <\/select>\n    <\/div>\n    <div class=\"option\">\n        <select name=\"quantity\" class=\"sticker-select\">\n            <option value=\"50\">50 units<\/option>\n            <option value=\"100\">100 units<\/option>\n            <option value=\"250\">250 units<\/option>\n        <\/select>\n    <\/div>\n    <div class=\"option\">\n        <select name=\"material\" class=\"sticker-select\">\n            <option value=\"Vinyl\">Vinyl<\/option>\n            <option value=\"Paper\">Paper<\/option>\n            <option value=\"Holographic\">Holographic<\/option>\n        <\/select>\n    <\/div>\n<\/div>\n\n\n    <\/div>\n\n    <script>\n    document.getElementById('generate-btn').addEventListener('click', async () => {\n        const preview = document.getElementById('design-preview');\n        const button = document.getElementById('generate-btn');\n        const loading = document.getElementById('loading');\n        \n        try {\n            \/\/ Reset state\n            button.disabled = true;\n            preview.style.display = 'none';\n            loading.style.display = 'flex';\n            preview.src = '';\n\n            \/\/ Validate prompt\n            const prompt = document.getElementById('ai-prompt').value.trim();\n            if (!prompt) throw new Error('Please enter a description');\n\n            \/\/ ===== FIXED SECTION START =====\n            const formData = new FormData();\n            formData.append('prompt', prompt);\n\n            const response = await fetch('\/wp-json\/stability\/v1\/generate', {\n                method: 'POST',\n                body: formData \/\/ NO Content-Type header needed here\n            });\n            \/\/ ===== FIXED SECTION END =====\n\n            const data = await response.json();\n            \n            if (!response.ok) {\n                throw new Error(data.error || `Error: ${response.status}`);\n            }\n\n            \/\/ Display image\n            preview.src = `data:image\/png;base64,${data.image}`;\n            preview.style.display = 'block';\n\t\t\t\/\/ Add these lines after preview.style.display = 'block';\ndocument.getElementById('action-buttons').style.display = 'block';\n\n\/\/ Add event listeners for buttons\n\/\/ MODIFY YOUR REDO BUTTON EVENT LISTENER\ndocument.getElementById('redo-btn').addEventListener('click', () => {\n    const preview = document.getElementById('design-preview');\n    preview.src = '';\n    preview.style.display = 'none'; \/\/ Hide instead of leaving blank space\n    preview.removeAttribute('src'); \/\/ Force DOM reset\n    document.getElementById('action-buttons').style.display = 'none';\n    document.getElementById('ai-prompt').focus(); \/\/ Better UX\n});\n\n\ndocument.getElementById('add-to-cart-btn').addEventListener('click', async () => {\n    try {\n        const imageSrc = document.getElementById('design-preview').src;\n        const base64Data = imageSrc.split(',')[1];\n\t\tconst selections = {\n\t\t\tsize: document.querySelector('[name=\"size\"]').value,\n\t\t\tquantity: document.querySelector('[name=\"quantity\"]').value,\n\t\t\tmaterial: document.querySelector('[name=\"material\"]').value,\n\t\t};\n\t\t\n        const response = await fetch('\/wp-json\/custom\/v1\/add-to-cart', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application\/json' },\n            body: JSON.stringify({\n    image_data: base64Data,\n    size: document.querySelector('[name=\"size\"]').value,\n    quantity: document.querySelector('[name=\"quantity\"]').value,\n    material: document.querySelector('[name=\"material\"]').value })\n        });\n        const data = await response.json();\n        alert(data.success ? 'Added to cart!' : 'Error: Could not add to cart.');\n    } catch (error) {\n        console.error('Error:', error);\n        alert('Connection error. Try again.');\n    }\n});\n\n        } catch (error) {\n            console.error('Error:', error);\n            alert(error.message.includes('403') ? \n                'Content blocked: Modify your prompt' : \n                error.message\n            );\n        } finally {\n            button.disabled = false;\n            loading.style.display = 'none';\n        }\n    });\n    <\/script>\n\n    <!-- REST OF YOUR STYLE CODE REMAINS UNCHANGED -->\n    <style>\n    .ai-generator {\n        max-width: 100%;\n        margin: 2rem auto;\n        padding: 2rem;\n\t\tbackground: #0c0b0b;\n        border: 1px solid #e2e8f0;\n\t\tbox-shadow: 0 4px 6px rgba(0,0,0,0.1);\n        border-radius: 12px;\n    }\n    \n    #ai-prompt {\n        width: 96.5%;\n        min-height: 220px;\n        padding: 1.25rem;\n        margin-bottom: 1.8rem;\n        border: 2px solid #4a5568;\n        border-radius: 8px;\n\t\tfont-size: 1.9rem;\n\t\tline-height: 1.6;\n\t\ttransition: border-color 0.2s;\n\t\t\n    }\n\t#ai-prompt:focus {\n    border-color: #4f46e5;\n    outline: none;\n    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n}\n    \n    #generate-btn {\n        background: #4a5568;\n        color: white;\n        padding: 0.875rem 1.75rem;\n        border: none;\n        border-radius: 8px;\n        cursor: pointer;\n        font-size: 18px;\n\t\tfont-weight: 600;\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n        transition: background 0.3s ease;\n    }\n    \n    #generate-btn:hover {\n        background: #2d3748;\n    }\n    \n    #design-preview {\n        width: 100%;\n        max-width: 100%;\n        height: auto;\n        margin: 20px auto;\n        border: 2px solid #ddd;\n        border-radius: 8px;\n        object-fit: contain;\n\t\tbackground: linear-gradient(45deg, #f8fafc 25%, transparent 25%),\n                linear-gradient(-45deg, #f8fafc 25%, transparent 25%),\n                linear-gradient(45deg, transparent 75%, #f8fafc 75%),\n                linear-gradient(-45deg, transparent 75%, #f8fafc 75%);\n\t\tbackground-size: 20px 20px\n    }\n    \n    #loading {\n        display: none;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        margin: 20px auto;\n    }\n\t.ai-generator-hero {\n    position: relative;\n    background: linear-gradient(135deg, rgba(18,24,40,0.95) 0%, rgba(39,55,85,0.9) 100%);\n}\n\t.generator-container {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    align-items: start;\n}\n\t\t\n\t\t.sticker-options {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 1rem;\n    margin: 1.5rem 0;\n}\n\n.sticker-select {\n    width: 100%;\n    padding: 0.75rem;\n    border: 2px solid #4a5568;\n    border-radius: 8px;\n    background: #1a202c;\n    color: white;\n    appearance: none;\n    background-image: url(\"data:image\/svg+xml...\");\n}\n\t.prompt-input {\n    border: 1px solid #E5E7EB;\n    border-radius: 0.75rem;\n    padding: 1rem 1.5rem;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\t.generating-overlay::after {\n    content: \"\";\n    @apply animate-spin rounded-full h-8 w-8 border-4 border-white border-t-transparent;\n}\n    \n    .spinner {\n        border: 4px solid #f3f3f3;\n        border-top: 4px solid #3498db;\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        animation: spin 1s linear infinite;\n    }\n    \n    @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }\n    <\/style>\n    <?php\n    return ob_get_clean();\n});\n","active":true,"modified":"2025-02-26 02:19:16","revision":"123"}]}